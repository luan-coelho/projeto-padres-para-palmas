---
import { NAV_LINKS } from '../consts';
---

<header id="header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-transparent">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-20">
            <!-- Logo (oculto no topo, aparece no scroll) -->
            <a href="/" class="flex-shrink-0">
                <img src="/images/logo-colorida.png" alt="Projeto Padres" class="h-12 w-auto opacity-0 transition-opacity duration-300" id="header-logo">
            </a>
            
            <!-- Desktop Navigation -->
            <nav class="hidden md:flex items-center space-x-8">
                {NAV_LINKS.map(link => (
                    <a href={link.href} class="nav-link text-white hover:text-amarelo transition-colors font-medium">{link.label}</a>
                ))}
            </nav>
            
            <!-- Mobile Menu Button -->
            <button id="mobile-menu-btn" class="md:hidden text-white p-2" aria-label="Abrir menu">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
            </button>
        </div>
    </div>
    
    <!-- Mobile Menu -->
    <div id="mobile-menu" class="hidden md:hidden bg-grafite/95 backdrop-blur-sm">
        <nav class="px-4 py-4 space-y-3">
            {NAV_LINKS.map(link => (
                <a href={link.href} class="block text-white hover:text-amarelo py-2">{link.label}</a>
            ))}
        </nav>
    </div>
</header>

<script>
    // Mobile Menu Toggle
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    
    mobileMenuBtn?.addEventListener('click', () => {
        mobileMenu?.classList.toggle('hidden');
    });

    // Header Background on Scroll
    const header = document.getElementById('header');
    const headerLogo = document.getElementById('header-logo');
    const navLinks = document.querySelectorAll('.nav-link');
    
    function updateHeader() {
        if (window.scrollY > 100) {
            header?.classList.add('bg-white', 'shadow-md');
            header?.classList.remove('bg-transparent');
            navLinks.forEach(link => {
                link.classList.remove('text-white');
                link.classList.add('text-grafite');
            });
            // Mostrar logo no header ao rolar
            headerLogo?.classList.remove('opacity-0');
            headerLogo?.classList.add('opacity-100');
        } else {
            header?.classList.remove('bg-white', 'shadow-md');
            header?.classList.add('bg-transparent');
            navLinks.forEach(link => {
                link.classList.add('text-white');
                link.classList.remove('text-grafite');
            });
            // Ocultar logo no header quando no topo
            headerLogo?.classList.add('opacity-0');
            headerLogo?.classList.remove('opacity-100');
        }
    }
    
    window.addEventListener('scroll', updateHeader);
    
    // Run on load
    updateHeader();

    // Close mobile menu when clicking a link
    mobileMenu?.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
            mobileMenu?.classList.add('hidden');
        });
    });
</script>
