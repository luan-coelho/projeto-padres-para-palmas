---
import { Image } from 'astro:assets'
import type { CollectionEntry } from 'astro:content'
import BaseHead from '../components/BaseHead.astro'
import Footer from '../components/Footer.astro'
import Header from '../components/Header.astro'
import FormattedDate from '../components/FormattedDate.astro'

type Props = CollectionEntry<'blog'>['data']

const { title, description, pubDate, updatedDate, heroImage } = Astro.props
---

<!doctype html>
<html lang="pt-BR">
    <head>
        <BaseHead
            title={`${title} | Projeto Padres para a Igreja de Palmas`}
            description={description}
            image={heroImage}
        />
    </head>

    <body class="bg-white text-grafite antialiased">
        <Header />

        <!-- Spacer for fixed header -->
        <div class="h-20"></div>

        <main class="py-12 lg:py-16">
            <article class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <!-- Hero Image -->
                {
                    heroImage && (
                        <div class="aspect-[2/1] rounded-2xl overflow-hidden shadow-xl mb-8">
                            <Image
                                width={1200}
                                height={600}
                                src={heroImage}
                                alt={title}
                                class="w-full h-full object-cover"
                            />
                        </div>
                    )
                }

                <!-- Article Header -->
                <header class="mb-8 text-center">
                    <!-- Date -->
                    <div class="text-verde font-medium mb-4">
                        <FormattedDate date={pubDate} />
                        {
                            updatedDate && (
                                <span class="text-grafite/60 italic ml-4">
                                    Atualizado em <FormattedDate date={updatedDate} />
                                </span>
                            )
                        }
                    </div>

                    <!-- Title -->
                    <h1 class="text-3xl sm:text-4xl lg:text-5xl font-light text-grafite leading-tight mb-4">
                        {title}
                    </h1>

                    <!-- Description -->
                    <p class="text-xl text-grafite/70 max-w-2xl mx-auto">{description}</p>

                    <!-- Separator -->
                    <div class="mt-8 flex items-center justify-center gap-4">
                        <div class="w-16 h-px bg-azul"></div>
                        <svg class="w-6 h-6 text-azul" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M11 2v7H4v4h7v9h2v-9h7V9h-7V2h-2z"></path>
                        </svg>
                        <div class="w-16 h-px bg-azul"></div>
                    </div>
                </header>

                <!-- Article Content -->
                <div class="prose max-w-none">
                    <slot />
                </div>

                <!-- Navigation back to blog -->
                <footer class="mt-16 pt-8 border-t border-gray-200 text-center">
                    <a
                        href="/blog"
                        class="inline-flex items-center gap-2 bg-grafite hover:bg-grafite/90 text-white font-semibold px-6 py-3 rounded-full transition-all duration-300">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M7 16l-4-4m0 0l4-4m-4 4h18">
                            </path>
                        </svg>
                        Voltar às notícias
                    </a>
                </footer>
            </article>
        </main>

        <Footer />
    </body>
</html>
